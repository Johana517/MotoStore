<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Recupera tu contraseña - MotoStore</title>
    <!-- Bootstrap 5 CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="../img/logo_moto_store-1-5.png" />
    <!-- Estilos personalizados -->
    <link rel="stylesheet" href="/css/style.css" />
    <style>
      body {
        background-color: lightgray;
        font-family: Arial, sans-serif;
      }
      .container {
        background-color: white;
        padding: 2rem;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .form-control {
        border-radius: 6px;
      }
      .btn-primary,
      .btn-success {
        border-radius: 6px;
        padding: 10px;
        width: 100%;
      }
      footer {
        background-color: #343a40;
      }
      .password-container {
        position: relative;
      }
      .password-toggle {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        cursor: pointer;
        color: #666;
      }
      .password-toggle:hover {
        color: #333;
      }
    </style>
  </head>
  <body>
    <header>
      <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
          <a class="navbar-brand" href="index.html">
            <img
              src="../img/logo_moto_store-1-5.png"
              style="width: 200px; height: 150px"
              alt="logo"
            />
          </a>
        </div>
      </nav>
    </header>
    <main>
      <div class="container mt-5 mb-5 pb-5 pt-5">
        <div class="row">
          <div class="col-md-6">
            <h2 class="fs-4">Recupera tu contraseña</h2>
            <p class="fs-4">
              ¿Olvidaste tu contraseña? No te preocupes. Aquí te dejamos los
              pasos que tienes que hacer para recuperar tu contraseña:
            </p>
            <ol>
              <li>Introduce tu correo electrónico y dale a continuar.</li>
              <li>
                Recibirás un código de verificación a tu correo electrónico.
              </li>
              <li>
                Introduce el código en el formulario y dale a verificar código.
              </li>
              <li>Ingresa una contraseña nueva y confírmala.</li>
              <li>
                Confirma la contraseña y envía para iniciar sesión normalmente.
              </li>
            </ol>
          </div>
          <div class="col-md-6">
            <form id="recoveryForm">
              <!-- Paso 1: Correo -->
              <div id="email-step" class="form-group mb-3">
                <label for="email">Correo Electrónico:</label>
                <input
                  type="email"
                  class="form-control"
                  id="email"
                  aria-describedby="emailHelp"
                  placeholder="tucorreo123@gmail.com"
                  required
                />
                <button
                  type="button"
                  class="btn btn-primary mt-3"
                  id="continue-btn"
                >
                  Continuar
                </button>
              </div>
              <!-- Paso 2: Código -->
              <div id="code-step" class="form-group mb-3" style="display: none">
                <label for="code">Código de Verificación:</label>
                <input
                  type="text"
                  class="form-control"
                  id="code"
                  placeholder="Ingresar código"
                  required
                />
                <button
                  type="button"
                  class="btn btn-success mt-3"
                  id="verify-code-btn"
                >
                  Verificar Código
                </button>
              </div>
              <!-- Paso 3: Contraseña y Confirmar Contraseña -->
              <div id="password-step" style="display: none">
                <div class="form-group mb-3 password-container">
                  <label for="password">Contraseña:</label>
                  <input
                    type="password"
                    class="form-control"
                    id="password"
                    placeholder="Ingresa la nueva contraseña"
                    required
                  />
                  <i
                    class="fas fa-eye password-toggle"
                    id="toggle-password"
                  ></i>
                </div>
                <div class="form-group mb-3 password-container">
                  <label for="confirm-password">Confirmar Contraseña:</label>
                  <input
                    type="password"
                    class="form-control"
                    id="confirm-password"
                    placeholder="Confirma tu contraseña"
                    required
                  />
                  <i
                    class="fas fa-eye password-toggle"
                    id="toggle-confirm-password"
                  ></i>
                </div>
                <button
                  type="button"
                  class="btn btn-primary"
                  id="submit-password-btn"
                >
                  Enviar
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </main>
    <footer class="py-4">
      <div class="container1">
        <!-- Primera fila: Enlaces y redes sociales -->
        <div class="d-flex flex-column flex-md-row justify-content-between align-items-center px-5">
          <!-- Enlaces legales - Izquierda -->
          <div class="mb-3 mb-md-0">
            <ul class="list-inline mb-0">
              <li class="list-inline-item me-3">
                <a href="aviso-legal-fronend.html" class="text-decoration-none fs-5">Aviso Legal</a>
              </li>
              <li class="list-inline-item">
                <a href="ayuda-frontend.html" class="text-decoration-none fs-5">Ayuda</a>
              </li>
            </ul>
          </div>
          
          <!-- Redes sociales - Derecha (iconos más grandes) -->
          <div class="mb-3 mb-md-0">
            <ul class="list-inline mb-0">
              <li class="list-inline-item me-3">
                <a href="#" class="text-white">
                  <i class="fab fa-youtube fa-3x"></i>
                </a>
              </li>
              <li class="list-inline-item me-3">
                <a href="#" class="text-white">
                  <i class="fab fa-facebook fa-3x"></i>
                </a>
              </li>
              <li class="list-inline-item me-3">
                <a href="#" class="text-white">
                  <i class="fab fa-x-twitter fa-3x"></i>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="#" class="text-white">
                  <i class="fab fa-instagram fa-3x"></i>
                </a>
              </li>
            </ul>
          </div>
        </div>
          
          <!-- Copyright centrado -->
          <div class="col-12 text-center mt-4 pt-3 border-top border-secondary">
            <p class="mb-0 text-white">https://Motostore.com</p>
          </div>
        </div>
      </div>
    </footer>

    <!-- Bootstrap 5 JS -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
    <!-- JavaScript personalizado -->
    <script>
      // Elementos del formulario
      const emailStep = document.getElementById("email-step");
      const codeStep = document.getElementById("code-step");
      const passwordStep = document.getElementById("password-step");
      const continueBtn = document.getElementById("continue-btn");
      const verifyCodeBtn = document.getElementById("verify-code-btn");
      const submitPasswordBtn = document.getElementById("submit-password-btn");
      const emailInput = document.getElementById("email");
      const codeInput = document.getElementById("code");
      const passwordInput = document.getElementById("password");
      const confirmPasswordInput = document.getElementById("confirm-password");
      const togglePassword = document.getElementById("toggle-password");
      const toggleConfirmPassword = document.getElementById(
        "toggle-confirm-password"
      );

      // Mostrar/Ocultar contraseña
      togglePassword.addEventListener("click", function () {
        const type = passwordInput.type === "password" ? "text" : "password";
        passwordInput.type = type;
        this.classList.toggle("fa-eye");
        this.classList.toggle("fa-eye-slash");
      });

      toggleConfirmPassword.addEventListener("click", function () {
        const type =
          confirmPasswordInput.type === "password" ? "text" : "password";
        confirmPasswordInput.type = type;
        this.classList.toggle("fa-eye");
        this.classList.toggle("fa-eye-slash");
      });

      // Paso 1: Validar correo
      continueBtn.addEventListener("click", function () {
        if (emailInput.value.trim() === "") {
          Swal.fire({
            icon: "error",
            title: "Error",
            text: "Por favor, ingresa un correo electrónico.",
          });
          return;
        }
        Swal.fire({
          icon: "success",
          title: "Correo enviado",
          text: "Se ha enviado un código de verificación a tu correo.",
          timer: 1500,
          showConfirmButton: false,
        }).then(() => {
          emailStep.style.display = "none";
          codeStep.style.display = "block";
          codeInput.focus();
        });
      });

      // Paso 2: Validar código
      verifyCodeBtn.addEventListener("click", function () {
        if (codeInput.value.trim() === "") {
          Swal.fire({
            icon: "error",
            title: "Error",
            text: "Por favor, ingresa el código de verificación.",
          });
          return;
        }
        Swal.fire({
          icon: "success",
          title: "Código verificado",
          text: "Código verificado correctamente.",
          timer: 1500,
          showConfirmButton: false,
        }).then(() => {
          codeStep.style.display = "none";
          passwordStep.style.display = "block";
          passwordInput.focus();
        });
      });

      // Paso 3: Validar contraseñas
      submitPasswordBtn.addEventListener("click", function () {
        if (
          passwordInput.value.trim() === "" ||
          confirmPasswordInput.value.trim() === ""
        ) {
          Swal.fire({
            icon: "error",
            title: "Error",
            text: "Por favor, completa ambos campos de contraseña.",
          });
          return;
        }
        if (passwordInput.value !== confirmPasswordInput.value) {
          Swal.fire({
            icon: "error",
            title: "Error",
            text: "Las contraseñas no coinciden.",
          });
          return;
        }
        Swal.fire({
          icon: "success",
          title: "¡Éxito!",
          text: "Contraseña actualizada correctamente. Redirigiendo al inicio de sesión...",
          timer: 1500,
          showConfirmButton: false,
        }).then(() => {
          window.location.href = "index.html";
        });
      });
    </script>
  </body>
</html>
