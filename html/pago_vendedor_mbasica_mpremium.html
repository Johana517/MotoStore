<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MotoStore Colombia - Membresías</title>
  <link rel="stylesheet" href="../css/bootstrap.min.css">
  <link rel="stylesheet" href="../fontawesome-free-6.7.2-web/css/all.min.css">
  <link rel="icon" type="image/png" href="../img/logo_moto_store-1-5.png">
  <link rel="stylesheet" href="/css/style.css">
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      background-color: #f5f5f5;
      color: #333;
    }
    .natalia {
      max-width: 800px;
      margin: 30px auto;
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 {
      color: #2c3e50;
      text-align: center;
      margin-bottom: 30px;
    }
    .membership-options {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    .membership-card {
      border: 2px solid #ddd;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
    }
    .membership-card:hover {
      border-color: #3498db;
      transform: translateY(-5px);
    }
    .membership-name {
      font-size: 1.5rem;
      font-weight: bold;
      color: #2c3e50;
      margin-bottom: 10px;
    }
    .membership-price {
      font-size: 1.8rem;
      color: #e74c3c;
      margin-bottom: 15px;
    }
    .membership-features {
      list-style-type: none;
      padding: 0;
      margin-bottom: 20px;
      text-align: left;
    }
    .membership-features li {
      padding: 5px 0;
      border-bottom: 1px solid #eee;
    }
    .bank-info {
      background-color: #f8f9fa;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 30px;
      display: none;
    }
    .bank-info.active {
      display: block;
    }
    .bank-details {
      margin-top: 15px;
    }
    .bank-details p {
      margin: 8px 0;
      padding-left: 20px;
    }
    .upload-section {
      border: 2px dashed #ccc;
      padding: 30px;
      text-align: center;
      border-radius: 8px;
      margin-bottom: 20px;
      display: none;
    }
    .upload-section.active {
      display: block;
    }
    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      font-size: 1rem;
      transition: all 0.3s;
    }
    .btn-primary {
      background-color: #3498db;
      color: white;
    }
    .btn-primary:hover {
      background-color: #2980b9;
    }
    .btn-success {
      background-color: #2ecc71;
      color: white;
    }
    .btn-success:hover {
      background-color: #27ae60;
    }
    .btn-warning {
      background-color: #f39c12;
      color: white;
    }
    .btn-warning:hover {
      background-color: #d35400;
    }
    .btn-secondary {
      background-color: #7f8c8d;
      color: white;
    }
    .btn-secondary:hover {
      background-color: #95a5a6;
    }
    .status-message {
      padding: 15px;
      border-radius: 5px;
      margin-bottom: 20px;
      display: none;
    }
    .status-pending {
      background-color: #fff3cd;
      color: #856404;
      border: 1px solid #ffeeba;
    }
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.4);
    }
    .modal-content {
      background-color: #fefefe;
      margin: 15% auto;
      padding: 20px;
      border: 1px solid #888;
      width: 80%;
      max-width: 500px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }
    .close:hover {
      color: black;
    }
    .payment-summary {
      margin: 20px 0;
      padding: 15px;
      background-color: #f8f9fa;
      border-radius: 5px;
    }
    .payment-summary p {
      margin: 10px 0;
    }
    .payment-id {
      font-weight: bold;
      color: #2c3e50;
    }
    .nequi-qr {
      text-align: center;
      margin: 20px 0;
    }
    .profile-dropdown .nav-link {
      background-color: white;
      color: black;
      border: 1px solid #ddd;
      padding: 8px 15px;
      border-radius: 5px;
      display: flex;
      align-items: center;
    }
    .profile-dropdown .nav-link i {
      margin-right: 8px;
      font-size: 1.2rem;
    }
    .profile-dropdown .dropdown-menu {
      background-color: white;
      border: 1px solid #ddd;
    }
    .profile-dropdown .dropdown-item {
      color: black;
    }
    .profile-dropdown .dropdown-item:hover {
      background-color: #cc0000;
      color: white;
    }
    .nequi-qr img {
      max-width: 200px;
      border: 1px solid #ddd;
      border-radius: 8px;
    }
    .back-to-start {
      margin-top: 20px;
      text-align: center;
    }
    @media (max-width: 768px) {
      .membership-options {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>

<body>
  <header>
      <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
          <div class="row align-items-center">
            <div class="col-4 col-md-4">
              <!-- Logo -->
              <a class="navbar-brand" href="sesion-vendedor.html">
                <img
                  src="../img/logo_moto_store-1-5.png"
                  style="width: 200px; height: 150px"
                  alt="logo"
                />
              </a>
            </div>
            <div class="col-4 col-md-4">
              <!-- Barra de búsqueda (siempre visible) -->
              <div class="search-mobile d-lg-none ms-2">
                <form class="d-flex">
                  <input
                    type="search"
                    class="form-control"
                    placeholder="Search"
                    size="100"
                  />
                  <button class="btn btn-danger ms-2" type="submit">
                    Search
                  </button>
                </form>
              </div>
            </div>
            <div class="col">
              <!-- Botón hamburguesa -->
              <button
                class="navbar-toggler"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent1"
              >
                <i class="fas fa-bars"></i>
              </button>
            </div>
          </div>
          <!-- Menú colapsable -->
          <div class="collapse navbar-collapse" id="navbarSupportedContent1">
            <ul class="navbar-nav me-auto ms-2">
              <li class="nav-item mx-2">
                <a class="nav-link" href="membresia.html">Membresia</a>
              </li>
              <li class="nav-item mx-2">
                <a class="nav-link" href="MisProductos.html">Mis productos</a>
              </li>
              <!-- Barra de búsqueda (solo en desktop) -->
              <li class="nav-item search-desktop d-none d-lg-block">
                <form class="form-inline">
                  <div class="input-group">
                    <input
                      type="search"
                      class="form-control"
                      placeholder="Search"
                      size="30"
                    />
                    <button class="btn btn-danger" type="submit">Search</button>
                  </div>
                </form>
              </li>
              <!-- Dropdown de Vender con estilo blanco -->
              <li class="nav-item dropdown mx-2 vender-dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  id="navbarDropdownVender"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  Vender
                </a>
                <div
                  class="dropdown-menu"
                  aria-labelledby="navbarDropdownVender"
                >
                  <a class="dropdown-item" href="vender-moto.html">Moto</a>
                  <a class="dropdown-item" href="vender-repuesto.html"
                    >Repuesto</a
                  >
                </div>
              </li>
              <li class="nav-item mx-2">
                <a class="nav-link" href="ayuda-frontend.html">Ayuda</a>
              </li>
              <!-- Dropdown de Perfil con estilo negro -->
              <ul class="navbar-nav">
                <li class="nav-item dropdown profile-dropdown">
                  <a
                    class="nav-link dropdown-toggle"
                    href="#"
                    role="button"
                    data-bs-toggle="dropdown"
                  >
                    <i class="fas fa-user"></i> Mi cuenta
                  </a>
                  <ul class="dropdown-menu dropdown-menu-end">
                    <li>
                      <a class="dropdown-item" href="perfil-vendedor.html">
                        <i class="fas fa-user-circle me-2"></i>Ver perfil
                      </a>
                    </li>
                    <li>
                      <a class="dropdown-item" id="logout" href="#">
                        <i class="fas fa-sign-out-alt me-2"></i>Cerrar sesión
                      </a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="notificaciones.html">
                        <i class="fa-regular fa-bell"></i></i>Notificaciones
                      </a>
                    </li>
                  </ul>
                </li>
              </ul>
            </ul>
          </div>
        </div>
      </nav>
    </header>
  <main>
    <div class="container natalia">
      <h1>Adquirir Membresía</h1>
      
      <!-- Paso 1: Selección de membresía -->
      <div id="step1">
        <h2>Selecciona tu membresía</h2>
        <div class="membership-options">
          <div class="membership-card" onclick="selectMembership('basic')">
            <div class="membership-name">Básica</div>
            <div class="membership-price">$10.000/mes</div>
            <ul class="membership-features">
              <li>✔ 10 publicaciones/mes</li>
              <li>✔ Soporte básico</li>
              <li>✔ Acceso a estadísticas simples</li>
              <li>✔ Perfil de vendedor básico</li>
            </ul>
            <button class="btn btn-success">Comprar</button>
          </div>
          
          <div class="membership-card" onclick="selectMembership('premium')">
            <div class="membership-name">Premium</div>
            <div class="membership-price">$20.000/mes</div>
            <ul class="membership-features">
              <li>✔ Publicaciones ilimitadas</li>
              <li>✔ Soporte 24/7</li>
              <li>✔ Analíticas completas</li>
              <li>✔ Posicionamiento privilegiado</li>
              <li>✔ Promociones exclusivas</li>
              <li>✔ Perfil de vendedor destacado</li>
            </ul>
            <button class="btn btn-success">Comprar</button>
          </div>
        </div>
      </div>
      
      <!-- Modal de confirmación de compra -->
      <div id="paymentModal" class="modal">
        <div class="modal-content">
          <span class="close" onclick="closeModal()">&times;</span>
          <h2>Confirmación de compra</h2>
          <div class="payment-summary">
            <p><strong>Membresía seleccionada:</strong> <span id="modal-membership-name">Premium</span></p>
            <p><strong>Valor:</strong> <span id="modal-membership-price">$20.000/mes</span></p>
            <p><strong>Número de orden:</strong> <span class="payment-id" id="payment-id">MS-2023-987654</span></p>
            <p>Por favor realiza el pago usando el número de orden como referencia.</p>
          </div>
          <div class="d-flex justify-content-between">
            <button class="btn btn-success" onclick="showBankInfo()">Pagar</button>
            <button class="btn btn-warning" onclick="saveForLater()">Pagaré más tarde</button>
          </div>
        </div>
      </div>
      
      <!-- Información de pago pendiente -->
      <div id="pending-payment" class="bank-info">
        <h2>Pago pendiente</h2>
        <p>Tienes un pago pendiente para activar tu membresía. Por favor completa el proceso de pago.</p>
        <div class="bank-details">
          <p><strong>Membresía:</strong> <span id="pending-membership">Premium</span></p>
          <p><strong>Valor:</strong> <span id="pending-amount">$20.000</span></p>
          <p><strong>Número de orden:</strong> <span class="payment-id" id="pending-payment-id">MS-2023-987654</span></p>
        </div>
        <button class="btn btn-success" onclick="showBankInfo()">Continuar con el pago</button>
        <div class="back-to-start">
          <button class="btn btn-secondary" onclick="resetProcess()">Volver al inicio</button>
        </div>
      </div>
      
      <!-- Paso 2: Información de pago Nequi -->
      <div id="step2" class="bank-info">
        <h2>Información para el pago con Nequi</h2>
        
        <div class="nequi-qr">
          <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=NequiPay%3A3001234567%3Famount%3D20000%26reference%3DMS-2023-987654" alt="QR de pago Nequi">
          <p>Escanea este código QR para realizar el pago</p>
        </div>
        
        <div class="bank-details">
          <p><strong>Método de pago:</strong> Nequi</p>
          <p><strong>Número de teléfono:</strong> 300 1234567</p>
          <p><strong>Nombre del titular:</strong> MotoStore Colombia</p>
          <p><strong>Monto a transferir:</strong> <span id="selected-amount">$20.000</span></p>
          <p><strong>Referencia:</strong> <span class="payment-id" id="bank-payment-id">MS-2023-987654</span></p>
          <p><strong>Opcional:</strong> Envíanos un mensaje por WhatsApp al 300 1234567 con el comprobante</p>
        </div>
        
        <div class="d-flex justify-content-between mt-4">
          <button class="btn btn-primary" onclick="showUploadSection()">Subir comprobante</button>
          <button class="btn btn-warning" onclick="saveForLater()">Pagaré más tarde</button>
        </div>
        <div class="back-to-start">
          <button class="btn btn-secondary" onclick="resetProcess()">Volver al inicio</button>
        </div>
      </div>
      
      <!-- Paso 3: Subir comprobante -->
      <div id="step3" class="upload-section">
        <h2>Subir comprobante de pago</h2>
        <p>Adjunta una captura de pantalla del pago realizado por Nequi</p>
        
        <div style="margin: 20px 0;">
          <input type="file" id="receipt-upload" accept="image/*" style="display: none;">
          <button class="btn btn-primary" onclick="document.getElementById('receipt-upload').click()">Seleccionar archivo</button>
          <span id="file-name" style="margin-left: 10px;">No se ha seleccionado archivo</span>
        </div>
        
        <div style="margin-bottom: 20px;">
          <label for="username">Confirma tu nombre de usuario:</label>
          <input type="text" id="username" class="form-control" value="vend123" readonly>
        </div>
        
        <button class="btn btn-success" onclick="submitPayment()">Enviar comprobante</button>
        <div class="back-to-start">
          <button class="btn btn-secondary" onclick="resetProcess()">Volver al inicio</button>
        </div>
      </div>
      
      <!-- Mensaje de confirmación -->
      <div id="status-confirmation" class="status-message status-pending">
        <h3>¡Gracias por tu pago!</h3>
        <p>Hemos recibido tu comprobante de pago correctamente. Te notificaremos por correo electrónico en un máximo de 2 horas hábiles una vez verifiquemos el pago y active tu membresía.</p>
        <p>Número de orden: <span class="payment-id" id="confirmation-payment-id">MS-2023-987654</span></p>
        <div class="back-to-start">
          <button class="btn btn-secondary" onclick="resetProcess()">Volver al inicio</button>
        </div>
      </div>
    </div>
  </main>

  <footer class="py-4">
      <div class="container">
        <!-- Primera fila: Enlaces y redes sociales -->
        <div
          class="d-flex flex-column flex-md-row justify-content-between align-items-center"
        >
          <!-- Enlaces legales - Izquierda -->
          <div class="mb-3 mb-md-0">
            <ul class="list-inline mb-0">
              <li class="list-inline-item me-3 mar">
                <a
                  href="aviso-legal-fronend.html"
                  class="text-decoration-none fs-5"
                  id="ir-aviso-legal"
                  >Aviso Legal</a
                >
                <script>
                  document
                    .getElementById("ir-aviso-legal")
                    .addEventListener("click", function (e) {
                      localStorage.setItem("seccion", "membresia");
                      // el navegador seguirá la redirección automáticamente porque no hicimos e.preventDefault()
                    });
                </script>
              </li>
              <li class="list-inline-item mar">
                <a
                  href="ayuda-frontend.html"
                  class="text-decoration-none fs-5"
                  id="ir-a-ayuda"
                  >Ayuda</a
                >
                <script>
                  document
                    .getElementById("ir-a-ayuda")
                    .addEventListener("click", function (e) {
                      localStorage.setItem("seccion", "membresia");
                      // el navegador seguirá la redirección automáticamente porque no hicimos e.preventDefault()
                    });
                </script>
              </li>
            </ul>
          </div>

          <!-- Redes sociales - Derecha (iconos más grandes) -->
          <div class="mb-3 mb-md-0">
            <ul class="list-inline mb-0">
              <li class="list-inline-item me-3">
                <a href="#" class="text-white">
                  <i class="fab fa-youtube fa-3x"></i>
                </a>
              </li>
              <li class="list-inline-item me-3">
                <a href="#" class="text-white">
                  <i class="fab fa-facebook fa-3x"></i>
                </a>
              </li>
              <li class="list-inline-item me-3">
                <a href="#" class="text-white">
                  <i class="fab fa-x-twitter fa-3x"></i>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="#" class="text-white">
                  <i class="fab fa-instagram fa-3x"></i>
                </a>
              </li>
            </ul>
          </div>
        </div>

        <!-- Copyright centrado -->
        <div class="col-12 text-center mt-4 pt-3 border-top border-secondary">
          <p class="mb-0 text-white">https://Motostore.com</p>
        </div>
      </div>
    </footer>

  <script src="../js/bootstrap.bundle.min.js"></script>
  <script src="/js/buscar.js"></script>
  <script src="../fontawesome-free-6.7.2-web/js/all.min.js"></script>

  <script>
    let selectedMembership = null;
    let paymentId = null;
    
    // Verificar si hay un pago pendiente al cargar la página
    document.addEventListener('DOMContentLoaded', function() {
      checkPendingPayment();
    });
    
    function checkPendingPayment() {
      const pendingPayment = localStorage.getItem('pendingPayment');
      if (pendingPayment) {
        try {
          const data = JSON.parse(pendingPayment);
          if (data.type && data.paymentId) {
            selectedMembership = data.type;
            paymentId = data.paymentId;
            
            updatePaymentInfo();
            showSection('pending-payment');
            return;
          }
        } catch (e) {
          console.error('Error parsing pending payment data:', e);
          localStorage.removeItem('pendingPayment');
        }
      }
      
      // Si no hay pago pendiente o hay error, mostrar el inicio
      showSection('step1');
    }
    
    function updatePaymentInfo() {
      // Actualizar toda la información de pago en todas las secciones
      const amount = selectedMembership === 'basic' ? 10000 : 20000;
      const formattedAmount = '$' + amount.toLocaleString('es-CO');
      const membershipName = selectedMembership === 'basic' ? 'Básica' : 'Premium';
      
      // Actualizar modal
      document.getElementById('modal-membership-name').textContent = membershipName;
      document.getElementById('modal-membership-price').textContent = formattedAmount + '/mes';
      document.getElementById('payment-id').textContent = paymentId;
      
      // Actualizar sección de pago pendiente
      document.getElementById('pending-membership').textContent = membershipName;
      document.getElementById('pending-amount').textContent = formattedAmount;
      document.getElementById('pending-payment-id').textContent = paymentId;
      
      // Actualizar información bancaria
      document.getElementById('selected-amount').textContent = formattedAmount;
      document.getElementById('bank-payment-id').textContent = paymentId;
      
      // Actualizar QR de Nequi
      const qrImg = document.querySelector('.nequi-qr img');
      qrImg.src = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=NequiPay%3A3001234567%3Famount%3D${amount}%26reference%3D${paymentId}`;
      
      // Actualizar confirmación
      document.getElementById('confirmation-payment-id').textContent = paymentId;
    }
    
    function selectMembership(type) {
      selectedMembership = type;
      
      // Generar un ID de pago único
      paymentId = 'MS-' + new Date().getFullYear() + '-' + Math.floor(100000 + Math.random() * 900000);
      
      // Actualizar toda la información de pago
      updatePaymentInfo();
      
      // Mostrar el modal
      document.getElementById('paymentModal').style.display = 'block';
    }
    
    function closeModal() {
      document.getElementById('paymentModal').style.display = 'none';
    }
    
    function showBankInfo() {
      // Cerrar el modal si está abierto
      closeModal();
      
      // Mostrar la sección de información de pago
      showSection('step2');
    }
    
    function showUploadSection() {
      // Mostrar la sección de subida
      showSection('step3');
      
      // Configurar el input de archivo
      document.getElementById('receipt-upload').addEventListener('change', function() {
        const fileName = this.files[0] ? this.files[0].name : 'No se ha seleccionado archivo';
        document.getElementById('file-name').textContent = fileName;
      });
    }
    
    function submitPayment() {
      const fileInput = document.getElementById('receipt-upload');
      if (!fileInput.files[0]) {
        alert('Por favor, selecciona una captura de pantalla del pago');
        return;
      }
      
      // Simular envío al servidor
      console.log('Enviando comprobante...');
      console.log('Membresía:', selectedMembership);
      console.log('ID de pago:', paymentId);
      console.log('Archivo:', fileInput.files[0].name);
      console.log('Usuario:', document.getElementById('username').value);
      
      // Mostrar confirmación
      showSection('status-confirmation');
      
      // Eliminar el pago pendiente del localStorage
      localStorage.removeItem('pendingPayment');
    }
    
    function saveForLater() {
      // Guardar la información del pago pendiente
      const paymentData = {
        type: selectedMembership,
        paymentId: paymentId
      };
      localStorage.setItem('pendingPayment', JSON.stringify(paymentData));
      
      // Cerrar el modal si está abierto
      closeModal();
      
      // Mostrar sección de pago pendiente
      showSection('pending-payment');
      
      alert('Hemos guardado tu proceso de compra. Puedes completar el pago cuando lo desees.');
    }
    
    function resetProcess() {
      // Limpiar variables
      selectedMembership = null;
      paymentId = null;
      
      // Limpiar localStorage
      localStorage.removeItem('pendingPayment');
      
      // Limpiar input de archivo
      document.getElementById('receipt-upload').value = '';
      document.getElementById('file-name').textContent = 'No se ha seleccionado archivo';
      
      // Mostrar sección inicial
      showSection('step1');
    }
    
    function showSection(sectionId) {
      // Ocultar todas las secciones
      const sections = ['step1', 'pending-payment', 'step2', 'step3', 'status-confirmation'];
      sections.forEach(id => {
        const element = document.getElementById(id);
        if (element) {
          element.style.display = 'none';
          element.classList.remove('active');
        }
      });
      
      // Mostrar la sección solicitada
      const activeSection = document.getElementById(sectionId);
      if (activeSection) {
        activeSection.style.display = 'block';
        activeSection.classList.add('active');
        
        // Hacer scroll suave a la sección
        activeSection.scrollIntoView({ behavior: 'smooth' });
      }
    }
  </script>
</body>
</html>