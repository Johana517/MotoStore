<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Ingresa a tu cuenta</title>
    <!-- Bootstrap 5 CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Bootstrap Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <link
      rel="stylesheet"
      href="../fontawesome-free-6.7.2-web/css/all.min.css"
    />
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="../img/logo_moto_store-1-5.png" />
    <!-- Estilos personalizados -->
    <link rel="stylesheet" href="/css/style.css" />
    <style>
      body {
        background-color: #f0f2f5;
        font-family: Arial, sans-serif;
      }
      .login-container {
        background-color: white;
        padding: 2rem;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .btn-google,
      .btn-facebook {
        width: 100%;
        margin: 10px 0;
        padding: 12px;
        border-radius: 6px;
        font-size: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .btn-google {
        background-color: #fff;
        border: 1px solid #ccc;
        color: #333;
      }
      .btn-google:hover {
        background-color: #f8f8f8;
      }
      .btn-facebook {
        background-color: #1877f2;
        border: none;
        color: white;
      }
      .btn-facebook:hover {
        background-color: #1565c0;
      }
      .btn-icon {
        margin-right: 10px;
        font-size: 20px;
      }
      .form-control {
        border-radius: 6px;
      }
      .btn-primary {
        border-radius: 6px;
        padding: 10px;
      }
      /* Estilos para el campo de contraseña */
      .password-container {
        position: relative;
      }
      .toggle-password {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        background: none;
        border: none;
        color: #6c757d;
        cursor: pointer;
      }
      .password-container input {
        padding-right: 40px;
      }
    </style>
  </head>
  <body>
    <header class="header-container">
      <div class="container-fluid">
        <div class="row align-items-center text-center">
          <div class="col-md-4 text-md-start">
            <a id="logo"
              ><img
                src="../img/logo_moto_store-1-5.png"
                id="logo"
                style="width: 200px; height: 150px"
              />
            </a>
          </div>
        </div>
      </div>
    </header>
    <main>
      <div class="container my-5">
        <div class="row">
          <div class="col-md-6 bg-white py-3 login-container">
            <h2 class="fs-4">Bienvenido a MotoStore</h2>
            <p class="fs-4">
              Gestiona tus publicaciones, destaca tus productos, conecta con
              compradores interesados a través de WhatsApp y haz crecer tu
              negocio.
            </p>
          </div>
          <div class="col-md-6 bg-white py-3 login-container">
            <form id="loginForm">
              <div class="form-group mb-3">
                <label for="usuario">Correo Electrónico</label>
                <input
                  type="email"
                  class="form-control"
                  id="usuario"
                  aria-describedby="emailHelp"
                  placeholder="tucorreo123@gmail.com"
                  required
                />
              </div>

              <!-- Campo de contraseña con botón funcional -->
              <div class="form-group mb-3 password-container">
                <label for="password">Contraseña</label>
                <input
                  type="password"
                  class="form-control"
                  id="password"
                  placeholder="Contraseña"
                  required
                />
                <button
                  type="button"
                  class="toggle-password"
                  id="togglePassword"
                >
                  <i class="bi bi-eye fill"></i>
                </button>
              </div>

              <div class="form-group form-check mb-3">
                <input
                  type="checkbox"
                  class="form-check-input"
                  id="exampleCheck1"
                />
                <label class="form-check-label" for="exampleCheck1"
                  >Recordarme</label
                >
              </div>
              <div class="form-group form-check mb-3">
                <input type="checkbox" class="form-check-input" required />
                <label class="form-check-label">
                  Aceptar
                  <a
                    href="#"
                    class="text-primary"
                    data-bs-toggle="modal"
                    data-bs-target="#termsModal"
                    >Términos y Condiciones</a
                  >
                </label>
              </div>
              <button type="submit" class="btn btn-primary w-100 mb-3">
                Ingresar
              </button>
              <!-- Botones de Google y Facebook -->
              <button
                type="button"
                class="btn btn-google"
                onclick="redirectToGoogle()"
              >
                <svg
                  class="btn-icon"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M22.56 12.25C22.56 11.47 22.49 10.72 22.36 10H12V14.26H17.92C17.66 15.63 16.93 16.83 15.83 17.66V20.62H19.28C21.36 18.72 22.56 15.97 22.56 12.25Z"
                    fill="#4285F4"
                  />
                  <path
                    d="M12 23C15.45 23 18.36 21.91 19.28 20.62L15.83 17.66C14.83 18.39 13.58 18.86 12 18.86C8.72 18.86 5.97 16.73 5.02 13.75H1.49V16.81C2.4 18.81 4.92 21.86 8.47 22.86L12 23Z"
                    fill="#34A853"
                  />
                  <path
                    d="M5.02 13.75C4.77 12.98 4.63 12.17 4.63 11.33C4.63 10.49 4.77 9.68 5.02 8.91V5.85H1.49C0.54 7.85 0 9.99 0 11.33C0 12.67 0.54 14.81 1.49 16.81L5.02 13.75Z"
                    fill="#FBBC05"
                  />
                  <path
                    d="M12 4.14C13.73 4.14 15.27 4.75 16.46 5.88L19.54 2.8C18.36 1.64 15.45 0 12 0L8.47 0.14C4.92 1.14 2.4 4.19 1.49 6.19L5.02 9.25C5.97 6.27 8.72 4.14 12 4.14Z"
                    fill="#EA4335"
                  />
                </svg>
                Ingresar con Google
              </button>
              <button
                type="button"
                class="btn btn-facebook"
                onclick="redirectToFacebook()"
              >
                <i class="bi bi-facebook btn-icon"></i> Ingresar con Facebook
              </button>
              <div class="form-group text-center text-decoration-none mt-3">
                <a class="mx-3 text-primary" href="registrarse.html"
                  >Crear cuenta</a
                >
                <a class="mx-3 text-primary" href="recuperar-contraseña.html"
                  >Recuperar Contraseña</a
                >
              </div>
            </form>
          </div>
        </div>
      </div>
    </main>

    <!-- Modal de Términos y Condiciones -->
    <div
      class="modal fade"
      id="termsModal"
      tabindex="-1"
      aria-labelledby="termsModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-xl">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="termsModalLabel">
              Términos y Condiciones
            </h1>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <h3>
              Bienvenido a MotoStore. Al utilizar nuestros servicios, aceptas
              cumplir con los siguientes términos y condiciones:
            </h3>
            <h4>1. Uso del Sitio Web</h4>
            <p>
              MotoStore es una plataforma que conecta a compradores interesados
              en productos y repuestos de motos con vendedores. No somos
              responsables de las transacciones realizadas entre las partes, ya
              que actuamos únicamente como un puente de comunicación.
            </p>
            <h4>2. Catálogo de Productos</h4>
            <p>
              Los usuarios pueden explorar el catálogo de productos de manera
              gratuita. Cada producto incluye información básica proporcionada
              por el vendedor, como descripción, precio y disponibilidad.
            </p>
            <h4>3. Proceso de Compra</h4>
            <p>
              Al seleccionar un producto, el usuario será redirigido al WhatsApp
              del vendedor para coordinar la compra. MotoStore no participa en
              la negociación, pago o entrega de los productos.
            </p>
            <h4>4. Responsabilidad</h4>
            <p>
              MotoStore no se hace responsable de la calidad, autenticidad o
              estado de los productos ofrecidos por los vendedores, ni de
              cualquier inconveniente que pueda surgir durante la transacción.
            </p>
            <h4>5. Obligaciones del Usuario</h4>
            <p>
              Los usuarios deben proporcionar información veraz y utilizar la
              plataforma de manera ética. Cualquier uso indebido del sitio puede
              resultar en la suspensión de su acceso.
            </p>
            <h4>6. Modificaciones</h4>
            <p>
              MotoStore se reserva el derecho de modificar estos términos y
              condiciones en cualquier momento. Se recomienda a los usuarios
              revisar esta página periódicamente.
            </p>
            <h4>7. Contacto</h4>
            <p>
              Si tienes preguntas o inquietudes sobre estos términos, puedes
              contactarnos a través de nuestro formulario de ayuda o redes
              sociales.
            </p>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-danger"
              data-bs-dismiss="modal"
            >
              Cerrar
            </button>
          </div>
        </div>
      </div>
    </div>

    <footer class="py-4">
      <div class="container">
        <!-- Primera fila: Enlaces y redes sociales -->
        <div
          class="d-flex flex-column flex-md-row justify-content-between align-items-center"
        >
          <!-- Enlaces legales - Izquierda -->
          <div class="mb-3 mb-md-0">
            <ul class="list-inline mb-0">
              <li class="list-inline-item me-3 mar">
                <a
                  href="aviso-legal-fronend.html"
                  class="text-decoration-none fs-5"
                  >Aviso Legal</a
                >
              </li>
              <li class="list-inline-item mar">
                <a href="ayuda-frontend.html" class="text-decoration-none fs-5"
                  >Ayuda</a
                >
              </li>
            </ul>
          </div>

          <!-- Redes sociales - Derecha (iconos más grandes) -->
          <div class="mb-3 mb-md-0">
            <ul class="list-inline mb-0">
              <li class="list-inline-item me-3">
                <a href="#" class="text-white">
                  <i class="fab fa-youtube fa-3x"></i>
                </a>
              </li>
              <li class="list-inline-item me-3">
                <a href="#" class="text-white">
                  <i class="fab fa-facebook fa-3x"></i>
                </a>
              </li>
              <li class="list-inline-item me-3">
                <a href="#" class="text-white">
                  <i class="fab fa-x-twitter fa-3x"></i>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="#" class="text-white">
                  <i class="fab fa-instagram fa-3x"></i>
                </a>
              </li>
            </ul>
          </div>
        </div>

        <!-- Copyright centrado -->
        <div class="col-12 text-center mt-4 pt-3 border-top border-secondary">
          <p class="mb-0 text-white">https://Motostore.com</p>
        </div>
      </div>
    </footer>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- JavaScript personalizado -->
    <script>
      // Simulamos una base de datos de usuarios registrados
      const seccion = localStorage.getItem("seccion");
      const logo = document.getElementById("logo");
      if (seccion === "motos") {
        logo.href = "Home-motos.html";
      } else if (seccion === "repuestos") {
        logo.href = "home-repuestos.html";
      } else if (seccion === "catemoto") {
        logo.href = "categoriamoto.html";
      } else if (seccion === "caterepuesto") {
        logo.href = "categoriaRepuesto.html";
      } else if (seccion === "vendedor") {
        logo.href = "sesion-vendedor.html";
      } else if (seccion === "productos") {
        logo.href = "MisProductos.html";
      } else if (seccion === "membresia") {
        logo.href = "membresia.html";
      } else {
        logo.href = "index.html"; // por si no hay valor guardado
      }
      const registeredUsers = {
        "juanitoperez@gmail.com": {
          password: "12345",
          attempts: 0,
          blocked: false,
        },
        "juanmtsolarte@gmail.com": {
          password: "123456",
          attempts: 0,
          blocked: false,
        },
      };

      // Simulamos el estado del sistema (disponible o no)
      let systemAvailable = true;
      // Probabilidad de que el sistema no esté disponible (10% para pruebas)
      const systemFailureProbability = 0.1;

      // Validación y redirección para el formulario principal
      document
        .getElementById("loginForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          // Verificar si el sistema está disponible
          if (!systemAvailable || Math.random() < systemFailureProbability) {
            showSystemUnavailableError();
            return;
          }

          const email = document.getElementById("usuario").value;
          const password = document.getElementById("password").value;

          // Verificar si el correo existe en el sistema
          if (!registeredUsers[email]) {
            showEmailNotRegisteredError(email);
            return;
          }

          // Verificar si la cuenta está bloqueada
          if (registeredUsers[email].blocked) {
            showAccountBlockedError(email);
            return;
          }

          // Verificar credenciales correctas
          if (email === "juanitoperez@gmail.com" && password === "12345") {
            // Resetear intentos fallidos
            registeredUsers[email].attempts = 0;

            Swal.fire({
              icon: "success",
              title: "¡Éxito!",
              text: "Inicio de sesión exitoso. Redirigiendo al panel de vendedor...",
              timer: 1500,
              showConfirmButton: false,
            }).then(() => {
              window.location.href = "sesion-vendedor.html";
            });
          } else if (
            email === "juanmtsolarte@gmail.com" &&
            password === "123456"
          ) {
            // Resetear intentos fallidos
            registeredUsers[email].attempts = 0;

            Swal.fire({
              icon: "success",
              title: "¡Éxito!",
              text: "Inicio de sesión exitoso. Redirigiendo al panel de administrador...",
              timer: 1500,
              showConfirmButton: false,
            }).then(() => {
              window.location.href = "sesion-administrador.html";
            });
          } else {
            // Incrementar intentos fallidos
            registeredUsers[email].attempts++;

            // Verificar si se ha excedido el número máximo de intentos (3 en este caso)
            if (registeredUsers[email].attempts >= 3) {
              registeredUsers[email].blocked = true;
              showAccountBlockedError(email);
            } else {
              showInvalidCredentialsError();
            }
          }
        });

      // Función para mostrar error de credenciales inválidas
      function showInvalidCredentialsError() {
        Swal.fire({
          icon: "error",
          title: "Error",
          text: "Correo electrónico o contraseña incorrecta. Por favor, vuelve a intentarlo nuevamente.",
          confirmButtonText: "Entendido",
        });
      }

      // Función para mostrar error de cuenta no registrada
      function showEmailNotRegisteredError(email) {
        Swal.fire({
          icon: "error",
          title: "Cuenta no encontrada",
          html: `El correo <strong>${email}</strong> no está registrado en nuestro sistema.<br>¿Deseas crear una cuenta?`,
          showCancelButton: true,
          confirmButtonText: "Crear cuenta",
          cancelButtonText: "Cancelar",
        }).then((result) => {
          if (result.isConfirmed) {
            window.location.href = "registrarse.html";
          }
        });
      }

      // Función para mostrar error de cuenta bloqueada
      function showAccountBlockedError(email) {
        Swal.fire({
          icon: "warning",
          title: "Cuenta temporalmente bloqueada",
          html: `La cuenta asociada a <strong>${email}</strong> ha sido bloqueada temporalmente debido a múltiples intentos fallidos.<br>Por favor, intenta nuevamente más tarde o recupera tu contraseña.`,
          confirmButtonText: "Recuperar contraseña",
          showCancelButton: true,
          cancelButtonText: "Entendido",
        }).then((result) => {
          if (result.isConfirmed) {
            window.location.href = "recuperar-contraseña.html";
          }
        });
      }

      // Función para mostrar error de sistema no disponible
      function showSystemUnavailableError() {
        Swal.fire({
          icon: "error",
          title: "Sistema no disponible",
          text: "El sistema no está disponible en este momento. Por favor, inténtalo más tarde.",
          confirmButtonText: "Entendido",
        });
      }

      // Redirección simulada para Google
      function redirectToGoogle() {
        Swal.fire({
          icon: "info",
          title: "Redirigiendo a Google",
          text: "Serás redirigido a la página de inicio de sesión de Google.",
          timer: 2000,
          showConfirmButton: false,
        });
      }

      // Redirección simulada para Facebook
      function redirectToFacebook() {
        Swal.fire({
          icon: "info",
          title: "Redirigiendo a Facebook",
          text: "Serás redirigido a la página de inicio de sesión de Facebook.",
          timer: 2000,
          showConfirmButton: false,
        });
      }

      // Función para mostrar/ocultar contraseña con Bootstrap Icons
      document
        .getElementById("togglePassword")
        .addEventListener("click", function () {
          const passwordInput = document.getElementById("password");
          const icon = this.querySelector("i");

          if (passwordInput.type === "password") {
            passwordInput.type = "text";
            icon.classList.remove("bi-eye");
            icon.classList.add("bi-eye-slash");
          } else {
            passwordInput.type = "password";
            icon.classList.remove("bi-eye-slash");
            icon.classList.add("bi-eye");
          }
        });
    </script>
  </body>
</html>
